<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>unittest.cpp</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
    <body onload="prettyPrint()">
        <h4></h4>
        <pre class="prettyprint lang-cpp linenums">
#include "gmock/gmock.h"
#include "attendance_checker.h"

class Fixture : public ::testing::Test {
protected:
	AttendanceChecker checker;
	struct PlayerInfoForPrint {
		string name;
		int point;
		string grade;

<span style = "background-color:#fdd">		bool operator==(const PlayerInfoForPrint&amp; other) const {
			return name == other.name &amp;&amp; point == other.point &amp;&amp; grade == other.grade;
		}</span>
	};

<span style = "background-color:#dfd">	void SetUp() override {
		checker.Init();
	}</span>

<span style = "background-color:#dfd">	void TearDown() override {</span>

<span style = "background-color:#dfd">	}</span>
};

<span style = "background-color:#dfd">TEST_F(Fixture, Cleared) {
	checker.Clear();
	EXPECT_EQ(true, checker.IsCleared());
}</span>

<span style = "background-color:#dfd">TEST_F(Fixture, NoExceptionWhileInit) {
	EXPECT_NO_THROW(checker.Clear());
	EXPECT_NO_THROW(checker.Init());
}</span>

<span style = "background-color:#dfd">TEST_F(Fixture, Get500Lines) {
	EXPECT_EQ(500, checker.GetNumLinesOfRawData());
}</span>

<span style = "background-color:#dfd">TEST_F(Fixture, AllPlayersPointCorrect) {
	std::vector&lt;PlayerInfoForPrint&gt; expected;</span>

<span style = "background-color:#dfd">	expected.push_back({ "Umar", 48, "SILVER"});
	expected.push_back({ "Daisy", 45, "SILVER" });
	expected.push_back({ "Alice", 61, "GOLD" });
	expected.push_back({ "Xena", 91, "GOLD" });
	expected.push_back({ "Ian", 23, "NORMAL" });
	expected.push_back({ "Hannah", 127, "GOLD" });
	expected.push_back({ "Ethan", 44, "SILVER" });
	expected.push_back({ "Vera", 22, "NORMAL" });
	expected.push_back({ "Rachel", 54, "GOLD" });
	expected.push_back({ "Charlie", 58, "GOLD" });
	expected.push_back({ "Steve", 38, "SILVER" });
	expected.push_back({ "Nina", 79, "GOLD" });
	expected.push_back({ "Bob", 8, "NORMAL" });
	expected.push_back({ "George", 42, "SILVER" });
	expected.push_back({ "Quinn", 6, "NORMAL" });
	expected.push_back({ "Tina", 24, "NORMAL" });
	expected.push_back({ "Will", 36, "SILVER" });
	expected.push_back({ "Oscar", 13, "NORMAL" });
	expected.push_back({ "Zane", 1, "NORMAL" });</span>

<span style = "background-color:#dfd">	std::vector&lt;PlayerInfo&gt; v = checker.GetAllPlayersInfo();</span>

<span style = "background-color:#dfd">	std::vector&lt;PlayerInfoForPrint&gt; actual;
	for (auto e : v) {
		actual.push_back({e.name, e.point, e.grade});
	}</span>

<span style = "background-color:#dfd">	ASSERT_EQ(expected.size(), actual.size());</span>

<span style = "background-color:#fdd">	EXPECT_THAT(expected, testing::ContainerEq(actual));</span>
	//ASSERT_EQ(expected, actual);
	//for (int i = 0; i &lt; expected.size(); i++) {
	//	ASSERT_EQ(expected[i].name, actual[i].name);
	//	ASSERT_EQ(expected[i].point, actual[i].point);
	//	ASSERT_EQ(expected[i].grade, actual[i].grade);
	//}
<span style = "background-color:#fdd">}</span>

<span style = "background-color:#dfd">TEST_F(Fixture, IdentifyRemovedPlayers) {
	vector&lt;string&gt; expected = { "Bob", "Zane" };
	vector&lt;PlayerInfo&gt; actual = checker.GetRemovedPlayers();
	ASSERT_EQ(expected.size(), actual.size());</span>

<span style = "background-color:#fdd">	for (int i = 0; i &lt; expected.size(); i++) {
		ASSERT_EQ(expected[i], actual[i].name);
	}
}</span>

<span style = "background-color:#dfd">TEST_F(Fixture, NoExceptionWhileRun) {
	EXPECT_NO_THROW(checker.Clear());
	EXPECT_NO_THROW(checker.Run());
}</span>

<span style = "background-color:#dfd">TEST_F(Fixture, NoExceptionWhilePrinting) {
	EXPECT_NO_THROW(checker.Print());
}</span>

<span style = "background-color:#dfd">TEST_F(Fixture, BonusPoints) {
	PlayerInfo player;
	player.attendance_per_day[2] = 11;</span>

<span style = "background-color:#dfd">	EXPECT_EQ(10, checker.GetBonusPoints(player));</span>

<span style = "background-color:#dfd">	player.attendance_per_day[5] = 0;
	player.attendance_per_day[6] = 11;
	EXPECT_EQ(20, checker.GetBonusPoints(player));
}</span></pre>
        <hr />
        <table width="100%">
            <thead>
                <tr>
                    <th align="center">
                        <small>Generated by</small>
                        <a href="https://github.com/OpenCppCoverage/OpenCppCoverage/releases">
                            <strong>OpenCppCoverage (Version: 0.9.9.0)</strong>
                        </a>
                    </th>
                </tr>
            </thead>
        </table>
    </body>
</html>